"use strict";(globalThis.webpackChunkphysical_ai_robotics_textbook=globalThis.webpackChunkphysical_ai_robotics_textbook||[]).push([[400],{8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},9116(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-1-ros2/rclpy-python-agents","title":"rclpy and Python Agents","description":"Authoring Python nodes, parameters, timers, composition, and agent orchestration.","source":"@site/docs/module-1-ros2/rclpy-python-agents.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/rclpy-python-agents","permalink":"/docs/module-1-ros2/rclpy-python-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/rclpy-python-agents.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"rclpy-python-agents","title":"rclpy and Python Agents","description":"Authoring Python nodes, parameters, timers, composition, and agent orchestration.","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Nodes, Topics, Services, Actions","permalink":"/docs/module-1-ros2/ros2-communication"},"next":{"title":"URDF for Humanoid Robots","permalink":"/docs/module-1-ros2/urdf-humanoids"}}');var i=s(4848),r=s(8453);const a={id:"rclpy-python-agents",title:"rclpy and Python Agents",description:"Authoring Python nodes, parameters, timers, composition, and agent orchestration.",sidebar_position:3},o="rclpy and Python Agents",l={},d=[{value:"Beginner",id:"beginner",level:2},{value:"Intermediate",id:"intermediate",level:2},{value:"Advanced",id:"advanced",level:2},{value:"ROS 2 Code Examples",id:"ros-2-code-examples",level:2},{value:"Humanoid-Specific Explanations",id:"humanoid-specific-explanations",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Assessments",id:"assessments",level:2},{value:"RAG Summary Chunks",id:"rag-summary-chunks",level:2},{value:"Urdu Translation",id:"urdu-translation",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"rclpy-and-python-agents",children:"rclpy and Python Agents"})}),"\n",(0,i.jsx)(n.h2,{id:"beginner",children:"Beginner"}),"\n",(0,i.jsx)(n.p,{children:"Python nodes let you write robot logic quickly. A node can publish messages, subscribe to topics, set timers, and manage parameters. Agents are coordinating nodes that supervise others and make decisions."}),"\n",(0,i.jsx)(n.h2,{id:"intermediate",children:"Intermediate"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"rclpy"})," to build nodes with timers and parameters for runtime tuning. Composition packs multiple components into a single process. Agents implement event loops that read sensors and schedule actions. Parameters allow live reconfiguration of gains and thresholds without restarting."]}),"\n",(0,i.jsx)(n.h2,{id:"advanced",children:"Advanced"}),"\n",(0,i.jsx)(n.p,{children:"Design agents with finite state machines and guard conditions. Use multi-threaded or multi-process executors to isolate critical callbacks. Apply parameter events and dynamic reconfigure patterns. Persist agent state, record decisions, and enforce safety with watchdogs and heartbeats."}),"\n",(0,i.jsx)(n.h2,{id:"ros-2-code-examples",children:"ROS 2 Code Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# file: agent_node.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Agent(Node):\n    def __init__(self):\n        super().__init__('agent')\n        self.declare_parameter('threshold', 0.5)\n        self.pub = self.create_publisher(String, 'agent_cmd', 10)\n        self.sub = self.create_subscription(String, 'sensor_status', self.cb, 10)\n        self.timer = self.create_timer(0.1, self.tick)\n        self.state = 'IDLE'\n\n    def cb(self, msg):\n        pass\n\n    def tick(self):\n        msg = String()\n        msg.data = self.state\n        self.pub.publish(msg)\n\ndef main():\n    rclpy.init()\n    node = Agent()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# file: parameter_watcher.py\nimport rclpy\nfrom rclpy.node import Node\n\nclass ParamWatch(Node):\n    def __init__(self):\n        super().__init__('param_watch')\n        self.add_on_set_parameters_callback(self.on_set)\n\n    def on_set(self, params):\n        return rclpy.parameter.SetParametersResult(successful=True)\n\ndef main():\n    rclpy.init()\n    node = ParamWatch()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"humanoid-specific-explanations",children:"Humanoid-Specific Explanations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Agents orchestrate perception and control while enforcing safety transitions."}),"\n",(0,i.jsx)(n.li,{children:"Parameters expose controller gains and state thresholds for tuning."}),"\n",(0,i.jsx)(n.li,{children:"Timers implement periodic tasks like heartbeat publishing and balance updates."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Build an agent that transitions from IDLE to WALK when a topic reports stable support."}),"\n",(0,i.jsx)(n.li,{children:"Add a parameter that switches gait speed and verify changes live."}),"\n",(0,i.jsxs)(n.li,{children:["Record agent commands into ",(0,i.jsx)(n.code,{children:"rosbag2"})," and review timing."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"assessments",children:"Assessments"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Multiple Choice: Which feature allows live tuning of controller gains?"}),"\n",(0,i.jsx)(n.li,{children:"Short Answer: Why use a timer for heartbeat messages?"}),"\n",(0,i.jsx)(n.li,{children:"Scenario: The agent must preempt walking if vision reports obstacle. Which design helps?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rag-summary-chunks",children:"RAG Summary Chunks"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chunk 1: rclpy builds Python nodes with timers, parameters, and pub/sub."}),"\n",(0,i.jsx)(n.li,{children:"Chunk 2: Agents coordinate subsystems using state machines and guard conditions."}),"\n",(0,i.jsx)(n.li,{children:"Chunk 3: Parameters enable live tuning for humanoid controllers and safety."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"urdu-translation",children:"Urdu Translation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"English: Python agents nizam ko humahangi se chalate hain."}),"\n",(0,i.jsx)(n.li,{children:"Roman Urdu: Python agents nizam ko humahangi se chalate hain."}),"\n",(0,i.jsx)(n.li,{children:"Urdu Script: \u067e\u0627\u0626\u062a\u06be\u0646 \u0627\u06cc\u062c\u0646\u0679\u0633 \u0646\u0638\u0627\u0645 \u06a9\u0648 \u06c1\u0645 \u0622\u06c1\u0646\u06af\u06cc \u0633\u06d2 \u0686\u0644\u0627\u062a\u06d2 \u06c1\u06cc\u06ba\u06d4"}),"\n",(0,i.jsx)(n.li,{children:"English: Parameters se robot ko baghair restart ke adjust kiya jata hai."}),"\n",(0,i.jsx)(n.li,{children:"Roman Urdu: Parameters se robot ko baghair restart ke adjust kiya jata hai."}),"\n",(0,i.jsx)(n.li,{children:"Urdu Script: \u067e\u06cc\u0631\u0627 \u0645\u06cc\u0679\u0631\u0632 \u0633\u06d2 \u0631\u0648\u0628\u0648\u0679 \u06a9\u0648 \u0628\u063a\u06cc\u0631 \u0631\u0650\u06cc \u0627\u0633\u0679\u0627\u0631\u0679 \u06a9\u06d2 \u0627\u06cc\u0688\u062c\u0633\u0679 \u06a9\u06cc\u0627 \u062c\u0627\u062a\u0627 \u06c1\u06d2\u06d4"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);