"use strict";(self.webpackChunkphysical_ai_robotics_textbook=self.webpackChunkphysical_ai_robotics_textbook||[]).push([[944],{5492(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1-ros2/ros2-architecture","title":"ROS 2 Architecture","description":"Graph, middleware, QoS, executors, and composition for humanoid robotics.","source":"@site/docs/module-1-ros2/ros2-architecture.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/ros2-architecture","permalink":"/docs/module-1-ros2/ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ros2-architecture.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"ros2-architecture","title":"ROS 2 Architecture","description":"Graph, middleware, QoS, executors, and composition for humanoid robotics.","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Module 1: ROS 2 \u2013 The Robotic Nervous System","permalink":"/docs/module-1-ros2/ros2-intro"},"next":{"title":"Nodes, Topics, Services, Actions","permalink":"/docs/module-1-ros2/ros2-communication"}}');var r=i(4848),o=i(8453);const t={id:"ros2-architecture",title:"ROS 2 Architecture",description:"Graph, middleware, QoS, executors, and composition for humanoid robotics.",sidebar_position:1},a="ROS 2 Architecture",l={},c=[{value:"Beginner",id:"beginner",level:2},{value:"Intermediate",id:"intermediate",level:2},{value:"Advanced",id:"advanced",level:2},{value:"ROS 2 Code Examples",id:"ros-2-code-examples",level:2},{value:"Humanoid-Specific Explanations",id:"humanoid-specific-explanations",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Assessments",id:"assessments",level:2},{value:"RAG Summary Chunks",id:"rag-summary-chunks",level:2},{value:"Urdu Translation",id:"urdu-translation",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-architecture",children:"ROS 2 Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"beginner",children:"Beginner"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 is a communication framework that lets different robot parts exchange messages safely and efficiently. The system is a graph of nodes connected by topics, services, and actions. Nodes run separately, so one failure does not crash the whole robot. This modular design makes humanoid robots reliable and easier to scale."}),"\n",(0,r.jsx)(n.h2,{id:"intermediate",children:"Intermediate"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses DDS as a transport layer to deliver messages with configurable Quality of Service. The graph consists of executable nodes that publish or subscribe to topics for streaming data, and services/actions for request\u2013reply and long-running tasks. Executors schedule callbacks, timers, and subscriptions deterministically when configured with real-time kernels. Composition loads multiple components in a single process to reduce latency and memory overhead."}),"\n",(0,r.jsx)(n.h2,{id:"advanced",children:"Advanced"}),"\n",(0,r.jsx)(n.p,{children:"For humanoid control loops, deterministic latency is critical. Configure QoS for sensor streams as best-effort and control commands as reliable with transient local durability for late joiners. Use intra-process communication and shared memory to reduce serialization overhead. Place balance and locomotion callbacks in a priority executor on a PREEMPT_RT kernel. Profile end-to-end latency from sensor driver to controller output and enforce watchdogs to guarantee fail-safe behavior."}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-code-examples",children:"ROS 2 Code Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: qos_demo_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\nfrom std_msgs.msg import String\n\nclass QosPub(Node):\n    def __init__(self):\n        super().__init__('qos_pub')\n        qos = QoSProfile(depth=10)\n        qos.reliability = ReliabilityPolicy.RELIABLE\n        qos.durability = DurabilityPolicy.TRANSIENT_LOCAL\n        self.pub = self.create_publisher(String, 'control_cmd', qos)\n        self.timer = self.create_timer(0.01, self.tick)\n        self.i = 0\n\n    def tick(self):\n        msg = String()\n        msg.data = str(self.i)\n        self.pub.publish(msg)\n        self.i += 1\n\ndef main():\n    rclpy.init()\n    node = QosPub()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: qos_demo_subscriber.py\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy\nfrom std_msgs.msg import String\n\nclass QosSub(Node):\n    def __init__(self):\n        super().__init__('qos_sub')\n        qos = QoSProfile(depth=10)\n        qos.reliability = ReliabilityPolicy.RELIABLE\n        qos.durability = DurabilityPolicy.TRANSIENT_LOCAL\n        self.sub = self.create_subscription(String, 'control_cmd', self.cb, qos)\n\n    def cb(self, msg):\n        pass\n\ndef main():\n    rclpy.init()\n    node = QosSub()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"humanoid-specific-explanations",children:"Humanoid-Specific Explanations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Humanoid balance controllers require reliable command channels and fast sensor streams."}),"\n",(0,r.jsx)(n.li,{children:"Transient local durability allows late-joining controllers to receive last known commands when restarting."}),"\n",(0,r.jsx)(n.li,{children:"Intra-process communication reduces copying between perception and control nodes co-located in the same process."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Configure two topics with different QoS profiles and measure message loss."}),"\n",(0,r.jsx)(n.li,{children:"Run callbacks at 1 kHz using a timer and record jitter."}),"\n",(0,r.jsx)(n.li,{children:"Compare latency with composition versus separate processes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"assessments",children:"Assessments"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple Choice: Which QoS durability ensures late joiners receive the last message?"}),"\n",(0,r.jsx)(n.li,{children:"Short Answer: Why is intra-process communication beneficial for humanoid loops?"}),"\n",(0,r.jsx)(n.li,{children:"Scenario: The robot stumbles when a perception node restarts. Which QoS change helps?"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rag-summary-chunks",children:"RAG Summary Chunks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Chunk 1: ROS 2 uses DDS transport with configurable QoS for reliability, durability, and performance."}),"\n",(0,r.jsx)(n.li,{children:"Chunk 2: Executors schedule node callbacks; composition reduces latency via shared process."}),"\n",(0,r.jsx)(n.li,{children:"Chunk 3: Humanoid control requires deterministic end-to-end latency and fail-safes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"urdu-translation",children:"Urdu Translation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"English: ROS 2 robot ke hisson ko ba-vasila rabt deta hai."}),"\n",(0,r.jsx)(n.li,{children:"Roman Urdu: ROS 2 robot ke hisson ko bawasila rabt deta hai."}),"\n",(0,r.jsx)(n.li,{children:"Urdu Script: ROS 2 \u0631\u0648\u0628\u0648\u0679 \u06a9\u06d2 \u062d\u0635\u0648\u06ba \u06a9\u0648 \u0628\u0627\u0648\u0633\u06cc\u0644\u06c1 \u0631\u0628\u0637 \u062f\u06cc\u062a\u0627 \u06c1\u06d2\u06d4"}),"\n",(0,r.jsx)(n.li,{children:"English: QoS se paighamat ki bharosemandi aur taakhir control hoti hai."}),"\n",(0,r.jsx)(n.li,{children:"Roman Urdu: QoS se paighamat ki bharosemandi aur takhir control hoti hai."}),"\n",(0,r.jsx)(n.li,{children:"Urdu Script: QoS \u0633\u06d2 \u067e\u06cc\u063a\u0627\u0645\u0627\u062a \u06a9\u06cc \u0628\u06be\u0631\u0648\u0633\u06c1 \u0645\u0646\u062f\u06cc \u0627\u0648\u0631 \u062a\u0627\u062e\u06cc\u0631 \u06a9\u0646\u0679\u0631\u0648\u0644 \u06c1\u0648\u062a\u06cc \u06c1\u06d2\u06d4"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);