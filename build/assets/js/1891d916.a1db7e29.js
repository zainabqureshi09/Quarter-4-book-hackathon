"use strict";(self.webpackChunkphysical_ai_robotics_textbook=self.webpackChunkphysical_ai_robotics_textbook||[]).push([[998],{6727(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"module-1-ros2/ros2-communication","title":"Nodes, Topics, Services, Actions","description":"Communication patterns for humanoid robotics in ROS 2.","source":"@site/docs/module-1-ros2/ros2-communication.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/ros2-communication","permalink":"/docs/module-1-ros2/ros2-communication","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ros2-communication.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"ros2-communication","title":"Nodes, Topics, Services, Actions","description":"Communication patterns for humanoid robotics in ROS 2.","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Architecture","permalink":"/docs/module-1-ros2/ros2-architecture"},"next":{"title":"rclpy and Python Agents","permalink":"/docs/module-1-ros2/rclpy-python-agents"}}');var r=s(4848),o=s(8453);const t={id:"ros2-communication",title:"Nodes, Topics, Services, Actions",description:"Communication patterns for humanoid robotics in ROS 2.",sidebar_position:2},a="Nodes, Topics, Services, Actions",c={},l=[{value:"Beginner",id:"beginner",level:2},{value:"Intermediate",id:"intermediate",level:2},{value:"Advanced",id:"advanced",level:2},{value:"ROS 2 Code Examples",id:"ros-2-code-examples",level:2},{value:"Humanoid-Specific Explanations",id:"humanoid-specific-explanations",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Assessments",id:"assessments",level:2},{value:"RAG Summary Chunks",id:"rag-summary-chunks",level:2},{value:"Urdu Translation",id:"urdu-translation",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nodes-topics-services-actions",children:"Nodes, Topics, Services, Actions"})}),"\n",(0,r.jsx)(n.h2,{id:"beginner",children:"Beginner"}),"\n",(0,r.jsx)(n.p,{children:"Nodes are independent programs. Topics stream data between nodes. Services answer direct requests. Actions manage long-running tasks with feedback. This separation lets humanoid robots coordinate vision, balance, and locomotion safely."}),"\n",(0,r.jsx)(n.h2,{id:"intermediate",children:"Intermediate"}),"\n",(0,r.jsx)(n.p,{children:"Publishers and subscribers connect through topics for asynchronous messaging. Services use request\u2013response for atomic operations. Actions handle goals, feedback, and cancellation. Use namespaces and remapping to organize large humanoid systems and avoid name collisions across subsystems."}),"\n",(0,r.jsx)(n.h2,{id:"advanced",children:"Advanced"}),"\n",(0,r.jsx)(n.p,{children:"Use message filters and synchronized subscriptions for time-aligned sensor fusion. Choose QoS best-effort for high-rate sensors and reliable for control. Implement idempotent services and cancellable actions for robust behavior under failures. Integrate actions with planners for preemption."}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-code-examples",children:"ROS 2 Code Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: basic_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass BasicPub(Node):\n    def __init__(self):\n        super().__init__('basic_pub')\n        self.pub = self.create_publisher(String, 'status', 10)\n        self.timer = self.create_timer(0.5, self.tick)\n        self.i = 0\n\n    def tick(self):\n        msg = String()\n        msg.data = str(self.i)\n        self.pub.publish(msg)\n        self.i += 1\n\ndef main():\n    rclpy.init()\n    node = BasicPub()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: basic_subscriber.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass BasicSub(Node):\n    def __init__(self):\n        super().__init__('basic_sub')\n        self.sub = self.create_subscription(String, 'status', self.cb, 10)\n\n    def cb(self, msg):\n        pass\n\ndef main():\n    rclpy.init()\n    node = BasicSub()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: service_server.py\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddServer(Node):\n    def __init__(self):\n        super().__init__('add_server')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.cb)\n\n    def cb(self, request, response):\n        response.sum = request.a + request.b\n        return response\n\ndef main():\n    rclpy.init()\n    node = AddServer()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: service_client.py\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass AddClient(Node):\n    def __init__(self):\n        super().__init__('add_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            pass\n        req = AddTwoInts.Request()\n        req.a = 2\n        req.b = 3\n        self.future = self.cli.call_async(req)\n\ndef main():\n    rclpy.init()\n    node = AddClient()\n    rclpy.spin_until_future_complete(node, node.future)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: action_server.py\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.action import ActionServer\nfrom example_interfaces.action import Fibonacci\n\nclass FibServer(Node):\n    def __init__(self):\n        super().__init__('fib_server')\n        self.server = ActionServer(self, Fibonacci, 'fib', self.execute)\n\n    async def execute(self, goal_handle):\n        feedback = Fibonacci.Feedback()\n        result = Fibonacci.Result()\n        seq = [0, 1]\n        for i in range(1, goal_handle.request.order):\n            seq.append(seq[i] + seq[i-1])\n            feedback.partial_sequence = seq\n            goal_handle.publish_feedback(feedback)\n        result.sequence = seq\n        goal_handle.succeed()\n        return result\n\ndef main():\n    rclpy.init()\n    node = FibServer()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: action_client.py\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.action import ActionClient\nfrom example_interfaces.action import Fibonacci\n\nclass FibClient(Node):\n    def __init__(self):\n        super().__init__('fib_client')\n        self.client = ActionClient(self, Fibonacci, 'fib')\n        self.client.wait_for_server()\n        goal = Fibonacci.Goal()\n        goal.order = 5\n        self.future = self.client.send_goal_async(goal)\n\ndef main():\n    rclpy.init()\n    node = FibClient()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"humanoid-specific-explanations",children:"Humanoid-Specific Explanations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Topics stream joint states and sensor frames at high rates."}),"\n",(0,r.jsx)(n.li,{children:"Services handle discrete commands like mode switches."}),"\n",(0,r.jsx)(n.li,{children:"Actions execute trajectories with feedback and preemption support."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create a publisher for joint positions and a subscriber that detects out-of-range values."}),"\n",(0,r.jsx)(n.li,{children:"Implement a service that resets controllers."}),"\n",(0,r.jsx)(n.li,{children:"Implement an action that executes a timed trajectory with cancellation."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"assessments",children:"Assessments"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple Choice: Which pattern suits long-running motion with feedback?"}),"\n",(0,r.jsx)(n.li,{children:"Short Answer: Why prefer best-effort for high-rate sensors?"}),"\n",(0,r.jsx)(n.li,{children:"Scenario: The robot must stop mid-trajectory. Which interface supports this?"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rag-summary-chunks",children:"RAG Summary Chunks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Chunk 1: Topics are asynchronous streams; services are request\u2013response; actions manage goals with feedback."}),"\n",(0,r.jsx)(n.li,{children:"Chunk 2: Humanoids use actions for trajectories and topics for joint states."}),"\n",(0,r.jsx)(n.li,{children:"Chunk 3: QoS and synchronization ensure reliable control and perception."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"urdu-translation",children:"Urdu Translation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"English: Topics musalsal data rawana karte hain."}),"\n",(0,r.jsx)(n.li,{children:"Roman Urdu: Topics musalsal data rawana karte hain."}),"\n",(0,r.jsx)(n.li,{children:"Urdu Script: \u0679\u0627\u067e\u06a9\u0633 \u0645\u0633\u0644\u0633\u0644 \u0688\u06cc\u0679\u0627 \u0631\u0648\u0627\u0646\u06c1 \u06a9\u0631\u062a\u06d2 \u06c1\u06cc\u06ba\u06d4"}),"\n",(0,r.jsx)(n.li,{children:"English: Actions lambi muddat ke goals aur feedback sambhalte hain."}),"\n",(0,r.jsx)(n.li,{children:"Roman Urdu: Actions lambi muddat ke goals aur feedback sambhalte hain."}),"\n",(0,r.jsx)(n.li,{children:"Urdu Script: \u0627\u06cc\u06a9\u0634\u0646\u0632 \u0644\u0645\u0628\u06cc \u0645\u062f\u062a \u06a9\u06d2 \u0627\u06c1\u062f\u0627\u0641 \u0627\u0648\u0631 \u0641\u06cc\u0688 \u0628\u06cc\u06a9 \u0633\u0646\u0628\u06be\u0627\u0644\u062a\u06d2 \u06c1\u06cc\u06ba\u06d4"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);