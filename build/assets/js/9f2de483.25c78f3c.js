"use strict";(globalThis.webpackChunkphysical_ai_robotics_textbook=globalThis.webpackChunkphysical_ai_robotics_textbook||[]).push([[480],{1454(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/ros2-intro","title":"Module 1: ROS 2 \u2013 The Robotic Nervous System","description":"Introduction to ROS 2 architecture, nodes, and communication for humanoid robotics.","source":"@site/docs/module-1-ros2/ros2-intro.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/ros2-intro","permalink":"/docs/module-1-ros2/ros2-intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/ros2-intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"ros2-intro","title":"Module 1: ROS 2 \u2013 The Robotic Nervous System","description":"Introduction to ROS 2 architecture, nodes, and communication for humanoid robotics."},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to Physical AI & Humanoid Robotics","permalink":"/docs/intro"},"next":{"title":"ROS 2 Architecture","permalink":"/docs/module-1-ros2/ros2-architecture"}}');var r=s(4848),o=s(8453);const t={sidebar_position:1,id:"ros2-intro",title:"Module 1: ROS 2 \u2013 The Robotic Nervous System",description:"Introduction to ROS 2 architecture, nodes, and communication for humanoid robotics."},a="Module 1: ROS 2 \u2013 The Robotic Nervous System",l={},c=[{value:"1. Learning Objectives",id:"1-learning-objectives",level:2},{value:"2. Core Explanation (Intermediate)",id:"2-core-explanation-intermediate",level:2},{value:"3. Beginner Simplification",id:"3-beginner-simplification",level:2},{value:"4. Advanced Deep-Dive",id:"4-advanced-deep-dive",level:2},{value:"DDS and QoS (Quality of Service)",id:"dds-and-qos-quality-of-service",level:3},{value:"Zero Copy Transport",id:"zero-copy-transport",level:3},{value:"Deterministic Execution",id:"deterministic-execution",level:3},{value:"5. Code Examples",id:"5-code-examples",level:2},{value:"Basic Publisher-Subscriber (Python)",id:"basic-publisher-subscriber-python",level:3},{value:"Launch File (XML)",id:"launch-file-xml",level:3},{value:"6. Real-World Humanoid Robotics Context",id:"6-real-world-humanoid-robotics-context",level:2},{value:"7. Exercises",id:"7-exercises",level:2},{value:"8. Assessment Questions",id:"8-assessment-questions",level:2},{value:"9. RAG-Friendly Summaries",id:"9-rag-friendly-summaries",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"module-1-ros-2--the-robotic-nervous-system",children:"Module 1: ROS 2 \u2013 The Robotic Nervous System"})}),"\n",(0,r.jsx)(n.h2,{id:"1-learning-objectives",children:"1. Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Understand"}),' the architecture of ROS 2 and why it is the "nervous system" of a robot.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Differentiate"})," between Nodes, Topics, Services, and Actions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement"})," a basic Publisher-Subscriber model in Python."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyze"})," real-time constraints in humanoid robot control."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-core-explanation-intermediate",children:"2. Core Explanation (Intermediate)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Robot Operating System 2 (ROS 2)"})," is not an operating system in the traditional sense (like Windows or Linux); it is a ",(0,r.jsx)(n.strong,{children:"middleware"})," framework. It provides a structured communications layer that allows different parts of a robot to talk to each other."]}),"\n",(0,r.jsx)(n.p,{children:"Think of a humanoid robot. It has cameras (eyes), motors (muscles), and a computer (brain)."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The camera needs to send image data to the brain."}),"\n",(0,r.jsx)(n.li,{children:"The brain needs to process that data and send commands to the motors."}),"\n",(0,r.jsx)(n.li,{children:"The motors need to report their position back to the brain."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["ROS 2 manages this data flow using a ",(0,r.jsx)(n.strong,{children:"Graph Architecture"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"}),": Individual executable processes that perform computation (e.g., a node for the camera driver, a node for face recognition)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": Buses over which nodes exchange messages. One node ",(0,r.jsx)(n.em,{children:"publishes"})," data to a topic, and another ",(0,r.jsx)(n.em,{children:"subscribes"})," to it. This is asynchronous (fire-and-forget)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),': A synchronous request/reply communication pattern (e.g., "Take a picture now").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),': For long-running tasks that provide feedback (e.g., "Walk to the door").']}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["ROS 2 improves upon ROS 1 by using ",(0,r.jsx)(n.strong,{children:"DDS (Data Distribution Service)"})," as its underlying transport layer, ensuring real-time capabilities and better reliability, which is critical for humanoid balance and safety."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-beginner-simplification",children:"3. Beginner Simplification"}),"\n",(0,r.jsxs)(n.p,{children:["Imagine a ",(0,r.jsx)(n.strong,{children:"Restaurant Kitchen"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"The Robot"})," is the entire Kitchen."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2"})," is the set of rules for how everyone talks to each other."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"})," are the Chefs. One chops vegetables, one grills meat, one plates the food."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),' are the shouts or orders. The "Vegetable Chopper" shouts "Onions are ready!" (Publishes). The "Grill Chef" listens for that shout (Subscribes) to start cooking.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),' are direct questions. The Head Chef asks, "Is the soup ready?" (Request). The Sous Chef says, "Yes" (Response).']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Without ROS 2, every chef would have to walk over to every other chef to whisper information. With ROS 2, they have a system to communicate efficiently so the meal (the robot's task) gets done perfectly."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-advanced-deep-dive",children:"4. Advanced Deep-Dive"}),"\n",(0,r.jsxs)(n.p,{children:["For high-performance humanoid robotics, standard ROS 2 topics might introduce latency. Here we look at ",(0,r.jsx)(n.strong,{children:"Zero Copy"})," and ",(0,r.jsx)(n.strong,{children:"Real-Time Executors"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"dds-and-qos-quality-of-service",children:"DDS and QoS (Quality of Service)"}),"\n",(0,r.jsx)(n.p,{children:"Under the hood, ROS 2 uses DDS. You can tune QoS policies:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliability"}),": ",(0,r.jsx)(n.code,{children:"BEST_EFFORT"})," (like UDP, good for high-freq sensor data) vs ",(0,r.jsx)(n.code,{children:"RELIABLE"})," (like TCP, good for commands)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Durability"}),": ",(0,r.jsx)(n.code,{children:"VOLATILE"})," (no history) vs ",(0,r.jsx)(n.code,{children:"TRANSIENT_LOCAL"})," (late-joiners get the last message)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"zero-copy-transport",children:"Zero Copy Transport"}),"\n",(0,r.jsxs)(n.p,{children:["In standard publication, messages are serialized, sent over the network loopback, and deserialized. For large data like 4K video or LiDAR point clouds, this is expensive. ",(0,r.jsx)(n.strong,{children:"Zero Copy"})," allows nodes in the same process (or using shared memory) to pass pointers to data rather than copying the data itself, significantly reducing latency."]}),"\n",(0,r.jsx)(n.h3,{id:"deterministic-execution",children:"Deterministic Execution"}),"\n",(0,r.jsxs)(n.p,{children:["Humanoid walking engines need control loops running at exactly 1kHz (every 1ms). Standard Linux is not real-time. We use ",(0,r.jsx)(n.code,{children:"PREEMPT_RT"})," patched Linux kernels and configure ROS 2 ",(0,r.jsx)(n.strong,{children:"Executors"})," to prioritize critical callbacks (like balance control) over non-critical ones (like logging)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-code-examples",children:"5. Code Examples"}),"\n",(0,r.jsx)(n.h3,{id:"basic-publisher-subscriber-python",children:"Basic Publisher-Subscriber (Python)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Scenario"}),': A "Heartbeat" node that tells the rest of the system the robot is alive.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# file: humanoid_heartbeat.py\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass HeartbeatNode(Node):\n    def __init__(self):\n        super().__init__('humanoid_heartbeat')\n        # Create a publisher on topic 'status'\n        self.publisher_ = self.create_publisher(String, 'status', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'System Normal: Heartbeat {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = HeartbeatNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"launch-file-xml",children:"Launch File (XML)"}),"\n",(0,r.jsx)(n.p,{children:"To start multiple nodes (e.g., heartbeat and motor_controller) together."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<launch>\n  <node pkg="my_humanoid_pkg" exec="humanoid_heartbeat" name="heartbeat_node" output="screen"/>\n  <node pkg="my_humanoid_pkg" exec="motor_controller" name="legs_controller" output="screen"/>\n</launch>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-real-world-humanoid-robotics-context",children:"6. Real-World Humanoid Robotics Context"}),"\n",(0,r.jsxs)(n.p,{children:["In a robot like ",(0,r.jsx)(n.strong,{children:"Tesla Optimus"})," or ",(0,r.jsx)(n.strong,{children:"Figure 01"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"}),": There might be hundreds. ",(0,r.jsx)(n.code,{children:"node_left_hand_controller"}),", ",(0,r.jsx)(n.code,{children:"node_vision_transformer"}),", ",(0,r.jsx)(n.code,{children:"node_battery_monitor"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": ",(0,r.jsx)(n.code,{children:"/joint_states"})," is a critical topic usually running at high frequency (100Hz+), streaming the angle of every finger and joint."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Safety"}),": If the ",(0,r.jsx)(n.code,{children:"heartbeat"}),' stops (the code example above), a hardware "Watchdog" will cut power to the motors instantly to prevent the robot from falling or hurting someone. ROS 2\'s reliability is key here.']}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-exercises",children:"7. Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Setup"}),": Install ROS 2 Humble on Ubuntu 22.04 (or use a Docker container)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Code"}),": Write a Subscriber node that listens to the ",(0,r.jsx)(n.code,{children:"status"}),' topic from our example and prints "WARNING" if it receives a message saying "Low Battery".']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analysis"}),": Use the command ",(0,r.jsx)(n.code,{children:"ros2 topic hz /status"})," to verify the frequency of the heartbeat."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debug"}),": Use ",(0,r.jsx)(n.code,{children:"rqt_graph"})," to visualize the connection between your publisher and subscriber."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"8-assessment-questions",children:"8. Assessment Questions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multiple Choice"}),": What communication pattern should be used for a camera sending video frames?","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"a) Service"}),"\n",(0,r.jsx)(n.li,{children:"b) Action"}),"\n",(0,r.jsx)(n.li,{children:"c) Topic (Publisher/Subscriber)"}),"\n",(0,r.jsx)(n.li,{children:"d) Parameter Server"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Short Answer"}),': Explain why "Zero Copy" is important for a humanoid robot\'s vision system.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scenario"}),": Your robot needs to open a door. Is this a Topic, Service, or Action? Justify your answer."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"9-rag-friendly-summaries",children:"9. RAG-Friendly Summaries"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Chunk 1: ROS 2 Definition"}),"\nROS 2 (Robot Operating System 2) is a middleware framework based on DDS (Data Distribution Service) that enables modular communication between robot components via Nodes, Topics, Services, and Actions. It supports real-time systems essential for humanoid robotics."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Chunk 2: Nodes and Topics"}),"\nA Node in ROS 2 is an executable process. Topics are channels for asynchronous data streaming (Publish/Subscribe). This decouples producers of data (e.g., sensors) from consumers (e.g., actuators), allowing for modular robot architecture."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Chunk 3: Real-Time Constraints"}),"\nHumanoid robots require deterministic execution for balance and locomotion. ROS 2 utilizes QoS (Quality of Service) policies and Zero Copy transport to minimize latency and ensure messages are delivered reliably within strict time windows."]}),"\n",(0,r.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);